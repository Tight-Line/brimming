<% content_for(:title) { "Articles - Brimming" } %>

<div class="page-header-with-action">
  <h1>Articles</h1>
  <% if user_signed_in? && policy(Article.new).create? %>
    <%= link_to "New Article", new_article_path, class: "btn btn-primary" %>
  <% end %>
</div>

<div class="card">
  <% if @articles.any? %>
    <ul class="article-list">
      <% @articles.each do |article| %>
        <li class="article-item">
          <div class="article-title">
            <%= link_to article.title, article_path(article) %>
            <span class="content-type-badge"><%= article.display_content_type %></span>
          </div>
          <div class="article-meta">
            <% if article.spaces.any? %>
              <span class="spaces">
                <% article.spaces.each do |space| %>
                  <%= link_to space.name, space_path(space), class: "space" %>
                <% end %>
              </span>
            <% else %>
              <span class="orphaned-badge">Orphaned</span>
            <% end %>
            <span>by <%= render 'shared/user_badge', user: article.user %></span>
            <span><%= time_ago_in_words(article.created_at) %> ago</span>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <div class="empty-state">
      <p>No articles yet.</p>
    </div>
  <% end %>
</div>
