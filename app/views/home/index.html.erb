<% content_for(:title) { "Brimming - Q&A Platform" } %>

<div class="two-column">
  <section>
    <div class="card">
      <div class="card-header">
        <h2>Recent Questions</h2>
      </div>
      <% if @recent_questions.any? %>
        <ul class="question-list">
          <% @recent_questions.each do |question| %>
            <li class="question-item">
              <div class="question-title">
                <%= link_to question.title, question_path(question) %>
              </div>
              <div class="question-meta">
                <span class="category"><%= link_to question.category.name, category_path(question.category) %></span>
                <span>by <%= render 'shared/user_badge', user: question.author %></span>
                <span><%= question.answers_count %> answers</span>
                <% if question.has_correct_answer? %>
                  <span class="badge badge-success">Solved</span>
                <% end %>
              </div>
            </li>
          <% end %>
        </ul>
      <% else %>
        <div class="empty-state">
          <p>No questions yet.</p>
        </div>
      <% end %>
    </div>
    <p class="mt-2"><%= link_to "View all questions &rarr;".html_safe, questions_path %></p>
  </section>

  <aside>
    <div class="card">
      <div class="card-header">
        <h2>Categories</h2>
      </div>
      <ul class="category-list">
        <% @categories.each do |category| %>
          <li class="category-item">
            <div>
              <span class="category-name"><%= link_to category.name, category_path(category) %></span>
              <% if current_user&.subscribed_categories&.include?(category) %>
                <span class="badge badge-subscribed">Subscribed</span>
              <% end %>
            </div>
            <span class="category-count"><%= category.questions_count %></span>
          </li>
        <% end %>
      </ul>
    </div>
    <p class="mt-2"><%= link_to "View all categories &rarr;".html_safe, categories_path %></p>
  </aside>
</div>
