<div class="admin-container">
  <div class="page-header">
    <h1>LDAP Servers</h1>
    <%= link_to "Add LDAP Server", new_admin_ldap_server_path, class: "btn btn-primary" %>
  </div>

  <% if @ldap_servers.any? %>
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Host</th>
          <th>Port</th>
          <th>Encryption</th>
          <th>Status</th>
          <th>Mappings</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @ldap_servers.each do |server| %>
          <tr>
            <td><%= link_to server.name, admin_ldap_server_path(server) %></td>
            <td><%= server.host %></td>
            <td><%= server.port %></td>
            <td><%= server.encryption %></td>
            <td>
              <% if server.enabled? %>
                <span class="badge badge-success">Enabled</span>
              <% else %>
                <span class="badge badge-secondary">Disabled</span>
              <% end %>
            </td>
            <td><%= server.ldap_group_mappings.count %></td>
            <td>
              <%= link_to "Edit", edit_admin_ldap_server_path(server), class: "btn btn-sm btn-secondary" %>
              <%= button_to "Delete", admin_ldap_server_path(server),
                            method: :delete,
                            class: "btn btn-sm btn-danger",
                            data: { turbo_confirm: "Are you sure you want to delete this LDAP server?" } %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <div class="empty-state">
      <p>No LDAP servers configured yet.</p>
      <p><%= link_to "Add your first LDAP server", new_admin_ldap_server_path %></p>
    </div>
  <% end %>
</div>
